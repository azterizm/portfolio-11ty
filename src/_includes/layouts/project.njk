{% extends "layouts/base.njk" %}

{% block content %}
<div class="py-6 md:py-12">
    {# Header Section with Sticky Title #}
    <div class="flex flex-col md:flex-row items-start md:items-center justify-between sticky top-4 z-30 mb-12 pointer-events-none mix-blend-darken">
        <h1 class="text-5xl sm:text-7xl md:text-8xl font-bold leading-none font-heading text-black pointer-events-auto bg-background/80 backdrop-blur-sm rounded-xl pr-4">
            {{ title }}
        </h1>
        <a href="/work#{{ page.fileSlug }}" class="pointer-events-auto mt-6 md:mt-0 px-6 py-3 bg-black text-white rounded-full text-lg font-semibold hover:scale-105 transition-transform flex items-center gap-2 shadow-lg">
            <span>Close</span>
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 256 256"><path d="M205.66,194.34a8,8,0,0,1-11.32,11.32L128,139.31,61.66,205.66a8,8,0,0,1-11.32-11.32L116.69,128,50.34,61.66A8,8,0,0,1,61.66,50.34L128,116.69l66.34-66.35a8,8,0,0,1,11.32,11.32L139.31,128Z"></path></svg>
        </a>
    </div>

    <div class="grid grid-cols-1 lg:grid-cols-12 gap-12">
        
        {# Sidebar / Metadata Column #}
        <div class="lg:col-span-4 space-y-8">
            
            {# Main Image Thumbnail #}
            <div class="relative rounded-xl overflow-hidden bg-white border border-black/10 shadow-sm">
                <img src="{{ main_image }}" alt="{{ title }} overview" class="w-full object-cover aspect-video">
                <div class="absolute top-4 left-4 bg-white/90 p-2 rounded-lg backdrop-blur-sm">
                     <img src="{{ logo }}" alt="{{ title }} logo" class="w-12 h-12 object-contain">
                </div>
            </div>

            {# Metadata #}
            <div class="space-y-6 text-lg">
                
                {# Description #}
                <div class="pb-6 border-b border-black/20">
                     <p class="font-medium text-black/80">{{ description }}</p>
                </div>

                {# Year #}
                <div class="flex justify-between items-baseline border-b border-black/20 pb-4">
                    <span class="text-black/60 text-sm uppercase tracking-wider font-bold">Launch Year</span>
                    <span class="font-medium">{{ year }}</span>
                </div>

                {# Role #}
                <div class="border-b border-black/20 pb-4">
                    <span class="block text-black/60 text-sm uppercase tracking-wider font-bold mb-2">Role</span>
                    <div class="flex flex-wrap gap-2">
                    {% for role in roles %}
                        <span class="px-3 py-1 bg-black/5 rounded-full text-sm">{{ role }}</span>
                    {% endfor %}
                    </div>
                </div>

                {# Technologies #}
                <div class="border-b border-black/20 pb-4">
                    <span class="block text-black/60 text-sm uppercase tracking-wider font-bold mb-2">Tech Stack</span>
                     <p class="leading-relaxed text-black/80">{{ technologies | join(", ") }}</p>
                </div>

                {# Company #}
                {% if company %}
                <div class="flex justify-between items-baseline border-b border-black/20 pb-4">
                    <span class="text-black/60 text-sm uppercase tracking-wider font-bold">Company</span>
                    <span class="font-medium">{{ company }}</span>
                </div>
                {% endif %}
                
                {# Partner Since #}
                {% if partner_since %}
                <div class="flex justify-between items-baseline border-b border-black/20 pb-4">
                    <span class="text-black/60 text-sm uppercase tracking-wider font-bold">Partner Since</span>
                    <span class="font-medium">{{ partner_since }}</span>
                </div>
                {% endif %}

                 {# Links #}
                <div class="flex flex-col gap-3 pt-2">
                    {% if website %}
                    <a href="{{ website }}" target="_blank" class="flex items-center justify-between px-6 py-3 bg-primary text-white rounded-full hover:bg-primary-light transition-colors group shadow-md hover:shadow-lg">
                        <span class="font-medium">Visit Website</span>
                         <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 256 256" class="transform group-hover:translate-x-1 transition-transform"><path d="M200,64V168a8,8,0,0,1-16,0V83.31L69.66,197.66a8,8,0,0,1-11.32-11.32L172.69,72H88a8,8,0,0,1,0-16H192A8,8,0,0,1,200,64Z"></path></svg>
                    </a>
                    {% endif %}
                    
                    {% if project_link %}
                    <a href="{{ project_link }}" target="_blank" class="flex items-center justify-between px-6 py-3 bg-white border-2 border-black text-black rounded-full hover:bg-black hover:text-white transition-colors group">
                         <span class="font-medium">View Source</span>
                         <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 256 256"><path d="M208,104v80a16,16,0,0,1-16,16H64a16,16,0,0,1-16-16V64A16,16,0,0,1,64,48h80a8,8,0,0,1,0,16H64v96H192V104a8,8,0,0,1,16,0Zm10.34-45.66a8,8,0,0,0-11.31,0L184,81.37V48a8,8,0,0,0-16,0v56a8,8,0,0,0,8,8h56a8,8,0,0,0,0-16H198.63l23.05-23A8,8,0,0,0,218.34,58.34Z"></path></svg>
                    </a>
                    {% endif %}
                </div>

            </div>
        </div>

        {# Content Column #}
        <div class="lg:col-span-8">
             <div class="prose prose-xl prose-headings:font-heading prose-headings:font-bold prose-p:text-black/80 prose-img:rounded-2xl prose-img:shadow-lg max-w-none">
                {{ content | safe }}
             </div>
        </div>

    </div>
</div>
{% endblock %}
